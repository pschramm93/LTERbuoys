View(profile_data)
profile_2=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
View(profile_2)
profile_data=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
head(profile_data)
names(profile_data)
names(profile_data)=c("sampledate","lakeid","temp_0m","flag_temp_0m","do_0m","flag_do_0m","lakeid2","temp_1m","flag_tmep_1m","do_1m",
"flag_do_1m","lakeid3","temp_2m","flag_temp_2m","do_2m","flag_do_2m")
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
#Enter deployment and Retrieval times in UTC
deploy=  as.POSIXct('06/22/2019 08:00',tz='UTC','%m/%d/%Y %H:%M')
retrieve=as.POSIXct('10/31/2019 02:00',tz='UTC','%m/%d/%Y %H:%M')
#Set sensor depths
depth.temp=15
depth.do=60
depth.light=15
depth.chla=NULL
depth.co2=NULL
#set lake ID
lake_ID="CB"
#Set output file name
file_name="CB_2019.csv"
#Set Files, if no data present set to NULL
lake_file='Y:/GLEON/BuoyData/CrystalBog/2019'
light_file= 'Y:/GLEON/BuoyData/CrystalBog/2019/Light/CB_2019_summer.csv'
temp_file=  'Y:/GLEON/BuoyData/CrystalBog/2019/Temp/063327_20191031_1338/063327_20191031_1338_data.txt'
do_file=    'Y:/GLEON/BuoyData/CrystalBog/2019/DO/7392-158829/CB_2019_do.TXT'
chla_file=  NULL
co2_file=   NULL
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
data.temp=rbr_temp(lake_ID,temp_file,depth.temp,deploy,retrieve)
data.light=hobo_light(light_file,depth.light,deploy,retrieve)
data.chla=pme_chla(chla_file,depth.chla,deploy,retrieve)
data.co2=pro_co2(co2_file,depth.co2,deploy,retrieve)
#get dataframes that have "data." pattern
#param_list=ls(envir = .GlobalEnv)[grep(pattern = "data.",x=ls(envir = .GlobalEnv))]
data=merge(data.do,data.temp,by.x="date_time_UTC",by.y="date_time_UTC",all=T)
data=merge(data,data.light,by.x="date_time_UTC",by.y="date_time_UTC",all = T)
24+24+24
200/72
profile_data=read.table("Y:/GLEON/Profile Data/CB_2019.txt",sep=",",header=T)
profile_data=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
names(profile_data)=c("sampledate","lakeid","temp_0m","flag_temp_0m","do_0m","flag_do_0m","lakeid2",
"temp_1m","flag_tmep_1m","do_1m","flag_do_1m","lakeid3","temp_2m","flag_temp_2m",
"do_2m","flag_do_2m")
profile_data$sampledate=as.POSIXct(profile_data$sampledate,format='%m/%d/%yyyy')
profile_data=read.table("Y:/GLEON/Profile Data/CB_2019.txt",sep=",",header=T)
profile_data=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
names(profile_data)=c("sampledate","lakeid","temp_0m","flag_temp_0m","do_0m","flag_do_0m","lakeid2",
"temp_1m","flag_tmep_1m","
profile_data$sampledate=as.POSIXct(profile_data$sampledate,format='%m/%d/%Y')
profile_data$sampledate=as.Date(profile_data$sampledate,format='%m/%d/%Y')
profile_data$sampledate=as.Date(profile_data$sampledate,'%m/%d/%Y')
?as.Date
profile_data$sampledate=as.Date(profile_data$SAMPLEDATE,'%m/%d/%Y')
profile_data$sampledate=as.POSIXct(profile_data$SAMPLEDATE,'%m/%d/%Y')
profile_data=read.table("Y:/GLEON/Profile Data/CB_2019.txt",sep=",",header=T)
profile_data=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
names(profile_data)=c("sampledate","lakeid","temp_0m","flag_temp_0m","do_0m","flag_do_0m","lakeid2",
"temp_1m","flag_tmep_1m","do_1m","flag_do_1m","lakeid3","temp_2m","flag_temp_2m",
"do_2m","flag_do_2m")
profile_data$sampledate=as.POSIXct(profile_data$SAMPLEDATE,'%m/%d/%Y')
profile_data$sampledate=as.POSIXct(profile_data$SAMPLEDATE,'%m/%d/%Y')
profile_data$sampledate=as.POSIXct(profile_data$sampledate,'%m/%d/%Y')
profile_data$sampledate=as.POSIXct(profile_data$sampledate,tz='UTC','%m/%d/%Y')
points(profile_data$sampledate,profile_data$temp_0m)
plot(data$date_time_UTC,data$tempC_15_cm)
points(profile_data$sampledate,profile_data$temp_0m,col='b')
points(profile_data$sampledate,profile_data$temp_0m,col='blue')
plot(data$date_time_UTC,data$do_mgl_60cm,pch=1)
points(profile_data$sampledate,profile_data$do_0m,col='yellow')
profile_data$sampledate
profile_data$do_0m
points(profile_data$sampledate,profile_data$do_0m,col='cyan')
points(profile_data$sampledate,profile_data$do_1m,col='magenta')
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate[2]]
profile_data$sampledate[2]
data$do_mgl_60cm[data$date_time_UTC[2]
]
data$do_mgl_60cm[2]
data[2]
data[,2]
data[2,2]
data[2,1]
profile_data$sampledate[2]
data$do_mgl_60cm[data$date_time_UTC=="2019-06-22"]
data$do_mgl_60cm[data$date_time_UTC=="2019-06-22 12:00"]
profile_data$do_0m[2]
View(profile_data)
data$do_mgl_60cm[data$date_time_UTC=="2019-07-01 12:00"]
data[data$date_time_UTC="2019-07-01 12:00"]
data[data$date_time_UTC=="2019-07-01 12:00"]
data[data$date_time_UTC=="2019-07-01 12:00",]
profile_data[3]
profile_data[3,]
data[data$date_time_UTC=="2019-07-01 12:00",]
data[data$date_time_UTC=="2019-07-01 17:00",]
profile_data[3,]
profile_data$sampledate[1]+(17*60*60)
profile_data$sampledate=profile_data$sampledate+(17*60*60)
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate]
data$do_mgl_60cm[data$date_time_UTC=profile_data$sampledate]
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate]
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate,]
data$do_mgl_60cm[,data$date_time_UTC==profile_data$sampledate]
type(data$date_time_UTC[1])
format(data$date_time_UTC[1])
data$date_time_UTC[1]
profile_data$sampledate[1]
profile_data=read.table("Y:/GLEON/Profile Data/CB_2019.txt",sep=",",header=T)
profile_data=reshape(profile_data,idvar="SAMPLEDATE",timevar = "DEPTH",direction = "wide")
names(profile_data)=c("sampledate","lakeid","temp_0m","flag_temp_0m","do_0m","flag_do_0m","lakeid2",
"temp_1m","flag_tmep_1m","do_1m","flag_do_1m","lakeid3","temp_2m","flag_temp_2m",
"do_2m","flag_do_2m")
profile_data$sampledate=as.POSIXct(profile_data$sampledate,tz='GMT','%m/%d/%Y')
profile_data$sampledate=profile_data$sampledate+(17*60*60)
data$do_mgl_60cm[,data$date_time_UTC==profile_data$sampledate]
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate]
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate,]
data$do_mgl_60cm[data$date_time_UTC[1]==profile_data$sampledate[1]]
data$do_mgl_60cm[profile_data$sampledate==data$date_time_UTC]
class(data$date_time_UTC)
class(profile_data$sampledate)
data$do_mgl_60cm[data$date_time_UTC==profile_data$sampledate]
data$date_time_UTC[data$date_time_UTC==profile_data$sampledate]
data$date_time_UTC[profile_data$sampledate]
data$do_mgl_60cm[profile_data$sampledate]
which(data$date_time_UTC==profile_data$sampledate)
match(data$date_time_UTC,profile_data$sampledate)
data$do_mgl_60cm[match(data$date_time_UTC,profile_data$sampledate)]
data$do_mgl_60cm[match(data$date_time_UTC,profile_data$sampledate),]
data$do_mgl_60cm[,match(data$date_time_UTC,profile_data$sampledate)]
data$do_mgl_60cm[pmatch(data$date_time_UTC,profile_data$sampledate),]
data$do_mgl_60cm[pmatch(data$date_time_UTC,profile_data$sampledate)]
plot(data$date_time_UTC,data$tempC_90_cm)
points(profile_data$sampledate,profile_data$temp_1m,col="magenta",pch=2)
plot(data$date_time_UTC,data$tempC_215_cm)
points(profile_data$sampledate,profile_data$temp_2m,col="magenta",pch=2)
points(data$date_time_UTC,data$tempC_215_cm,col="blue")
plot(data$date_time_UTC,data$tempC_15_cm)
points(profile_data$sampledate,profile_data$temp_0m,col="magenta",pch=2)
plot(data$date_time_UTC,data$lux_15cm)
255*17
install.packages('googlesheets4')
library(googlesheets4)
gc_data=read_sheet("https://docs.google.com/spreadsheets/d/1U_GAVMskzJRjgce2Tw7DtOA_kxNF8-VVQbr8q3jeMvI/edit#gid=0")
#Set your working dir and load functions, won't need after published as package
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
#Enter deployment and Retrieval times in UTC
deploy=  as.POSIXct('04/15/2021 10:00',tz='UTC','%m/%d/%Y %H:%M')
retrieve=as.POSIXct('11/10/2021 01:00',tz='UTC','%m/%d/%Y %H:%M')
do_file=    'Y:/GLEON/BuoyData/Escanaba/2021/DO/ES_2021_DO.TXT'
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
depth.temp=18
depth.do=78
depth.light=18
depth.chla=NULL
depth.co2=NULL
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
#Set output file name
file_name="ES_2021.csv"
list.files(paste(lake_file,"/Temp",sep=""))
#Set Files, if no data present set to NULL
lake_file=  'Y:/GLEON/BuoyData/Escanaba/2021'
list.files(paste(lake_file,"/Temp",sep=""))
es_temp=list.files(paste(lake_file,"/Temp",sep=""))
es_temp=paste(lake_file,es_temp)
es_temp
es_temp_file=es_temp
rm(es_temp)
es_temp=lapply(es_temp_file,read.csv(es_temp_file,skip=2,header = T))
es_temp=lapply(es_temp_file,read.csv,es_temp_file,skip=2,header = T)
es_temp_file=paste(lake_file,es_temp,sep="/")
es_temp_files=list.files(paste(lake_file,"/Temp",sep=""))
es_temp_files=paste(lake_file,es_temp\)
es_temp_files=paste(lake_file,es_temp_files,sep="/")
rm(es_temp_file)
es_temp=lapply(es_temp_files,read.csv,skip=2,header=T)
es_temp_files=paste(lake_file,"Temp",es_temp_files,sep="/")
es_temp=lapply(es_temp_files,read.csv,skip=2,header=T)
rm(es_temp_files)
es_temp_files=list.files(paste(lake_file,"/Temp",sep=""))
es_temp_files=paste(lake_file,"Temp",es_temp_files,sep="/")
es_temp=lapply(es_temp_files,read.csv,skip=2,header=T)
head(es_temp[[1]])
es_temp=lapply(es_temp,names,c("date_time_cen","tempC","lux","button_d","button_u","eof"))
es_temp=lapply(es_temp,namesc("date_time_cen","tempC","lux","button_d","button_u","eof"))
es_temp=lapply(es_temp,names(c("date_time_cen","tempC","lux","button_d","button_u","eof")))
es_temp=lapply(es_temp,names(es_temp)=c("date_time_cen","tempC","lux","button_d","button_u","eof")))
es_temp=lapply(es_temp,names(es_temp)=c("date_time_cen","tempC","lux","button_d","button_u","eof"))
es_temp=lapply(es_temp,names,c("date_time_cen","tempC","lux","button_d","button_u","eof"))
es_temp=lapply(es_temp,setNames, nm =c("date_time_cen","tempC","lux","button_d","button_u","eof"))
es_temp=lapply(es_temp_files,read.csv,skip=2,header=T)
es_temp=lapply(es_temp_files,read.csv,skip=2,header=T)
es_temp=lapply(es_temp,setNames, nm =c("date_time_cen","tempC","lux"))
es_temp2=lapply(es_temp$date_time_cen,as.Posixct,tz="America/Chicago",format="%m/%d/%YYYY %H:%M")
es_temp2=lapply(es_temp$date_time_cen,as.POSIXct,tz="America/Chicago",format="%m/%d/%YYYY %H:%M")
es_temp2=lapply(es_temp$date_time_cen,as.POSIXct,tz="America/Chicago",format="%m/%d/%Y %H:%M")
es_temp2=lapply(es_temp,function(x) as.POSIXct(es_temp$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M"))
rm(es_temp)
rm(es_temp2)
temp_1=read.csv(es_temp_files[1],skip=2,header = T)
temp_2=read.csv(es_temp_files[2],skip=2,header = T)
temp_3=read.csv(es_temp_files[3],skip=2,header = T)
temp_4=read.csv(es_temp_files[4],skip=2,header = T)
temp_5=read.csv(es_temp_files[5],skip=2,header = T)
temp_6=read.csv(es_temp_files[6],skip=2,header = T)
temp_7=read.csv(es_temp_files[7],skip=2,header = T)
temp_8=read.csv(es_temp_files[8],skip=2,header = T)
temp_1=read.csv(es_temp_files[1],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_1$date_time_cen=as.POSIXct(temp_1$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
temp_1$date_time_cen=as.POSIXct(temp_1$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_1$time_UTC)$tzone<-"UTC"
temp_2=read.csv(es_temp_files[2],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_2$date_time_cen=as.POSIXct(temp_2$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_2$time_UTC)$tzone<-"UTC"
temp_3=read.csv(es_temp_files[3],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_3$date_time_cen=as.POSIXct(temp_3$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_3$time_UTC)$tzone<-"UTC"
temp_4=read.csv(es_temp_files[4],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_4$date_time_cen=as.POSIXct(temp_4$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_4$time_UTC)$tzone<-"UTC"
temp_5=read.csv(es_temp_files[5],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_5$date_time_cen=as.POSIXct(temp_5date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_5$time_UTC)$tzone<-"UTC"
temp_6=read.csv(es_temp_files[6],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_6$date_time_cen=as.POSIXct(temp_6$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_6$time_UTC)$tzone<-"UTC"
temp_7=read.csv(es_temp_files[7],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_7$date_time_cen=as.POSIXct(temp_7$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_7$time_UTC)$tzone<-"UTC"
temp_8=read.csv(es_temp_files[8],skip=2,header = T,col.names=c("date_time_cen","tempC","lux"))
temp_8$date_time_cen=as.POSIXct(temp_8$date_time_cen,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_8$time_UTC)$tzone<-"UTC"
attributes(temp_2$date_time_cen)$tzone<-"UTC"
attributes(temp_3$date_time_cen)$tzone<-"UTC"
attributes(temp_4$date_time_cen)$tzone<-"UTC"
attributes(temp_5$date_time_cen)$tzone<-"UTC"
attributes(temp_6$date_time_cen)$tzone<-"UTC"
attributes(temp_7$date_time_cen)$tzone<-"UTC"
attributes(temp_8$date_time_cen)$tzone<-"UTC"
temp_1=read.csv(es_temp_files[1],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_1$date_time_utc=as.POSIXct(temp_1$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_1$date_time_utc)$tzone<-"UTC"
temp_2=read.csv(es_temp_files[2],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_2$date_time_utc=as.POSIXct(temp_2$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_2$date_time_utc)$tzone<-"UTC"
temp_3=read.csv(es_temp_files[3],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_3$date_time_utc=as.POSIXct(temp_3$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_3$date_time_utc)$tzone<-"UTC"
temp_4=read.csv(es_temp_files[4],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_4$date_time_utc=as.POSIXct(temp_4$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_4$date_time_utc)$tzone<-"UTC"
temp_5=read.csv(es_temp_files[5],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_5$date_time_utc=as.POSIXct(temp_5date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_5$date_time_utc)$tzone<-"UTC"
temp_6=read.csv(es_temp_files[6],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_6$date_time_utc=as.POSIXct(temp_6$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_6$date_time_utc)$tzone<-"UTC"
temp_7=read.csv(es_temp_files[7],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_7$date_time_utc=as.POSIXct(temp_7$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_7$date_time_utc)$tzone<-"UTC"
temp_8=read.csv(es_temp_files[8],skip=2,header = T,col.names=c("date_time_utc","tempC","lux"))
temp_8$date_time_utc=as.POSIXct(temp_8$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_8$date_time_utc)$tzone<-"UTC"
temp_5$date_time_utc=as.POSIXct(temp_5date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
temp_5$date_time_utc=as.POSIXct(temp_5$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_5$date_time_utc)$tzone<-"UTC"
depths=c(0,83,183,283,383,483,583,683,783)
depths=depths+16
temp_1=read.csv(es_temp_files[1],skip=2,header = T,col.names=c("date_time_utc","tempC_16cm","lux_16cm"))
temp_1$date_time_utc=as.POSIXct(temp_1$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_1$date_time_utc)$tzone<-"UTC"
temp_2=read.csv(es_temp_files[2],skip=2,header = T,col.names=c("date_time_utc","tempC_99cm","lux_99cm"))
temp_2$date_time_utc=as.POSIXct(temp_2$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_2$date_time_utc)$tzone<-"UTC"
temp_3=read.csv(es_temp_files[3],skip=2,header = T,col.names=c("date_time_utc","tempC_199cm","lux_199cm"))
temp_3$date_time_utc=as.POSIXct(temp_3$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_3$date_time_utc)$tzone<-"UTC"
temp_4=read.csv(es_temp_files[4],skip=2,header = T,col.names=c("date_time_utc","tempC_299cm","lux_299cm"))
temp_4$date_time_utc=as.POSIXct(temp_4$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_4$date_time_utc)$tzone<-"UTC"
temp_5=read.csv(es_temp_files[5],skip=2,header = T,col.names=c("date_time_utc","tempC_399cm","lux_399cm"))
temp_5$date_time_utc=as.POSIXct(temp_5$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_5$date_time_utc)$tzone<-"UTC"
temp_6=read.csv(es_temp_files[6],skip=2,header = T,col.names=c("date_time_utc","tempC_499cm","lux_499cm"))
temp_6$date_time_utc=as.POSIXct(temp_6$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_6$date_time_utc)$tzone<-"UTC"
temp_7=read.csv(es_temp_files[7],skip=2,header = T,col.names=c("date_time_utc","tempC_599cm","lux_599cm"))
temp_7$date_time_utc=as.POSIXct(temp_7$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_7$date_time_utc)$tzone<-"UTC"
temp_8=read.csv(es_temp_files[8],skip=2,header = T,col.names=c("date_time_utc","tempC_699cm","lux_699cm"))
temp_8$date_time_utc=as.POSIXct(temp_8$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_8$date_time_utc)$tzone<-"UTC"
es_temp=merge(temp_1,temp_2,by.x = date_time_utc,by.y = date_time_utc,all=T)
es_temp=merge(temp_1,temp_2,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_3,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_4,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_5,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_6,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_7,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_8,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
View(es_temp)
es_temp=subset(es_temp,date_time_UTC>=deploy & date_time_UTC<=retrieve)
es_temp=subset(es_temp,es_temp$date_time_UTC>=deploy & es_temp$date_time_UTC<=retrieve)
es_temp=merge(temp_1,temp_2,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_3,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_4,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_5,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_6,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_7,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_8,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
View(es_temp)
#Enter deployment and Retrieval times in UTC
deploy=  as.POSIXct('04/15/2021 20:00',tz='UTC','%m/%d/%Y %H:%M')
es_temp2=subset(es_temp,es_temp$date_time_UTC>=deploy & es_temp$date_time_UTC<=retrieve)
rm(es_temp2)
es_temp2=subset(es_temp,date_time_UTC>=deploy & date_time_UTC<=retrieve)
head(es_temp)
es_temp2=subset(es_temp,date_time_utc>=deploy & date_time_utc<=retrieve)
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC")
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC",all=T)
es_temp2=subset(es_temp,date_time_utc>=deploy & date_time_utc<=retrieve)
es_data=subset(es_data,date_time_utc>=deploy & date_time_utc<=retrieve)
View(es_data)
plot(es_data$date_time_utc,es_data)
plot(es_data$date_time_utc,es_data$tempC_16cm)
points(es_data$date_time_utc,es_data$tempC_699cm)
points(es_data$date_time_utc,es_data$tempC_299cm,col="blue")
points(es_data$date_time_utc,es_data$tempC_499cm,col="red")
points(es_data$date_time_utc,es_data$tempC_399cm,col="cyan")
plot(es_data$date_time_utc,es_data$do_mgl_78cm)
plot(es_data$date_time_utc,es_data$lux_16cm)
points(es_data$date_time_utc,es_data$lux_699cm,col="pink")
points(es_data$date_time_utc,es_data$lux_499cm,col="cyan")
points(es_data$date_time_utc,es_data$lux_299cm,col="red")
write.csv(es_data,paste(lake_file,file_name,sep="/"),row.names = F)
#Write Data
write.csv(data,paste(lake_file,file_name,sep="/"),row.names = FALSE)
#Write Data
write.csv(data,paste(lake_file,file_name,sep="/"),row.names = FALSE)
write.csv(es_data,paste(lake_file,file_name,sep="/"),row.names = F)
write.csv(es_data,"Users/Paul/Desktop/Escanaba_2021.csv",row.names=F)
write.csv(es_data,"C:/Users/Paul/Desktop/Escanaba_2021.csv",row.names=F)
es_temp_files=list.files(paste(lake_file,"/Temp",sep=""))
es_temp_files=paste(lake_file,"Temp",es_temp_files,sep="/")
file_name="ES_2021.csv"
#Set Files, if no data present set to NULL
lake_file=  'Y:/GLEON/BuoyData/Escanaba/2021'
es_temp_files=list.files(paste(lake_file,"/Temp",sep=""))
es_temp_files=paste(lake_file,"Temp",es_temp_files,sep="/")
temp_1=read.csv(es_temp_files[1],skip=2,header = T,col.names=c("date_time_utc","tempC_16cm","lux_16cm"))
temp_1$date_time_utc=as.POSIXct(temp_1$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_1$date_time_utc)$tzone<-"UTC"
temp_2=read.csv(es_temp_files[2],skip=2,header = T,col.names=c("date_time_utc","tempC_99cm","lux_99cm"))
temp_2$date_time_utc=as.POSIXct(temp_2$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_2$date_time_utc)$tzone<-"UTC"
temp_3=read.csv(es_temp_files[3],skip=2,header = T,col.names=c("date_time_utc","tempC_199cm","lux_199cm"))
temp_3$date_time_utc=as.POSIXct(temp_3$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_3$date_time_utc)$tzone<-"UTC"
temp_4=read.csv(es_temp_files[4],skip=2,header = T,col.names=c("date_time_utc","tempC_299cm","lux_299cm"))
temp_4$date_time_utc=as.POSIXct(temp_4$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_4$date_time_utc)$tzone<-"UTC"
temp_5=read.csv(es_temp_files[5],skip=2,header = T,col.names=c("date_time_utc","tempC_399cm","lux_399cm"))
temp_5$date_time_utc=as.POSIXct(temp_5$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_5$date_time_utc)$tzone<-"UTC"
temp_6=read.csv(es_temp_files[6],skip=2,header = T,col.names=c("date_time_utc","tempC_499cm","lux_499cm"))
temp_6$date_time_utc=as.POSIXct(temp_6$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_6$date_time_utc)$tzone<-"UTC"
temp_7=read.csv(es_temp_files[7],skip=2,header = T,col.names=c("date_time_utc","tempC_599cm","lux_599cm"))
temp_7$date_time_utc=as.POSIXct(temp_7$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_7$date_time_utc)$tzone<-"UTC"
temp_8=read.csv(es_temp_files[8],skip=2,header = T,col.names=c("date_time_utc","tempC_699cm","lux_699cm"))
temp_8$date_time_utc=as.POSIXct(temp_8$date_time_utc,tz="America/Chicago",format="%m/%d/%Y %H:%M")
attributes(temp_8$date_time_utc)$tzone<-"UTC"
View(temp_1)
View(temp_2)
es_temp=merge(temp_1,temp_2,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
View(es_temp)
duplicated(es_temp$date_time_utc)
es_temp[duplicated(es_temp$date_time_utc)]
es_temp[duplicated(es_temp)]
a=duplicated(es_temp$date_time_utc)
summary(A)
summary(a)
a[a==TRUE]
es_data[a==TRUE]
es_temp[a==TRUE]
es_temp$date_time_utc[duplicated(es_temp$date_time_utc)]
es_temp[duplicated(es_temp$date_time_utc)]
es_temp[,duplicated(es_temp$date_time_utc)]
es_temp[duplicated(es_temp$date_time_utc),]
es_temp[!duplicated(es_temp$date_time_utc),]
a=es_temp[!duplicated(es_temp$date_time_utc),]
a$date_time_utc[dupicated(a$date_time_utc)]
a$date_time_utc[duplicated(a$date_time_utc)]
es_temp=es_temp[!duplicated(es_temp$date_time_utc),]
es_temp=merge(es_temp,temp_3,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_3,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_4,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_5,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_6,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_7,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_temp=merge(es_temp,temp_8,by.x = "date_time_utc",by.y = "date_time_utc",all=T)
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC",all=T)
do_file=    'Y:/GLEON/BuoyData/Escanaba/2021/DO/ES_2021_DO.TXT'
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
do_file=    'Y:/GLEON/BuoyData/Escanaba/2021/DO/ES_2021_DO.TXT'
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
depth.do=78
deploy=  as.POSIXct('04/15/2021 20:00',tz='UTC','%m/%d/%Y %H:%M')
retrieve=as.POSIXct('11/10/2021 01:00',tz='UTC','%m/%d/%Y %H:%M')
#Run buoy run
data.do=pme_do(do_file,depth.do,deploy,retrieve)
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC",all=T)
es_data=es_data[!duplicated(es_data$date_time_utc),]
View(es_data)
es_data=subset(es_data,date_time_utc>=deploy & date_time_utc<=retrieve)
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC",all=T)
es_data=subset(es_data,date_time_utc>=deploy & date_time_utc<=retrieve)
es_data=es_data[!duplicated(es_data$date_time_utc),]
View(es_data)
write.csv(es_data,paste(lake_file,file_name,sep="/"),row.names = F)
es_data=es_data[duplicated(es_data$date_time_utc),]
es_data=merge(es_temp,data.do,by.x = "date_time_utc",by.y="date_time_UTC",all=T)
es_data=subset(es_data,date_time_utc>=deploy & date_time_utc<=retrieve)
es_data=es_data[!duplicated(es_data$date_time_utc),]
es_data[duplicated(es_data$date_time_utc),]
plot(es_data$date_time_utc,es_data$do_mgl_78cm)
points(es_data$date_time_utc,es_data$tempC_699cm,col="blue")
plot(es_data$date_time_utc,es_data$tempC_16cm)
points(es_data$date_time_utc,es_data$tempC_699cm,col="blue")
points(es_data$date_time_utc,es_data$tempC_299cm,col="red")
points(es_data$date_time_utc,es_data$tempC_399cm,col="pink")
points(es_data$date_time_utc,es_data$tempC_499cm,col="cyan")
points(es_data$date_time_utc,es_data$tempC_199cm,col="purple",pch=1)
es_data[duplicated(es_data)]
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
#Set your working dir and load functions, won't need after published as package
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
rm(list=ls())
#Set your working dir and load functions, won't need after published as package
wd=c("C:/Users/Paul/Dropbox/LTER_R/NTLbuoys/R")
source(paste(wd,"/loadbuoyfunc.R",sep=""))
loadbuoyfunc(wd)
doc_comp <- read.delim("C:/Users/Paul/Desktop/doc_comp.txt")
View(doc_comp)
plot(doc_comp$DOC[doc_comp$Vial=="New"],doc_comp$DOC[doc_comp$Vial=="Acid wash"])
abline(0,1)
doc_lm(doc_comp$DOC[doc_comp$Vial=="Acid wash"]~doc_comp$DOC[doc_comp$Vial=="New"])
doc_lm=(doc_comp$DOC[doc_comp$Vial=="Acid wash"]~doc_comp$DOC[doc_comp$Vial=="New"])
abline(doc_lm,col='blue')
doc_lm=(doc_comp$DOC[doc_comp$Vial=="New"]~doc_comp$DOC[doc_comp$Vial=="Acid wash"])
abline(doc_lm,col='blue')
doc_lm=(doc_comp$DOC[doc_comp$Vial=="Acid wash"]~doc_comp$DOC[doc_comp$Vial=="New"])
plot(doc_lm)
doc_lm=lm(doc_comp$DOC[doc_comp$Vial=="Acid wash"]~doc_comp$DOC[doc_comp$Vial=="New"])
abline(doc_lm)
summary(doc_lm)
doc=(doc_comp$DOC[doc_comp$Vial=="New"]~doc_comp$DOC[doc_comp$Vial=="Acid wash"])
doc
doc_diff=doc_comp$DOC[doc_comp$Vial=="New"]-doc_comp$DOC[doc_comp$Vial=="Acid wash"]
doc_diff
abline(doc_lm$residuals)
doc.res=resid(doc_lm)
plot(doc_comp$DOC,doc.res)
plot(doc_comp$DOC,doc.res[doc_comp$Vial=="New"])
plot(doc.res)
plot(doc_comp$DIC[doc_comp$Vial=="New"],doc_comp$DIC[doc_comp$Vial=="Acid wash"])
dic_lm=lm(plot(doc_comp$DOC[doc_comp$Vial=="New"],doc_comp$DOC[doc_comp$Vial=="Acid wash"]))
dic_lm=lm(doc_comp$DIC[doc_comp$Vial=="Acid wash"])~doc_comp$DIC[doc_comp$Vial=="New"])
dic_lm=lm(doc_comp$DIC[doc_comp$Vial=="Acid wash"]~doc_comp$DIC[doc_comp$Vial=="New"])
dic.res=resid(dic.res)
dic.res=resid(dic_lm)
plot(dic.res)
plot(dic.res)
plot(doc_comp$TIC[doc_comp$Vial=="New"],doc_comp$TIC[doc_comp$Vial=="Acid wash"])
abline(0,1)
plot(doc_comp$TOC[doc_comp$Vial=="New"],doc_comp$TOC[doc_comp$Vial=="Acid wash"])
abline(0,1)
doc_comp$diff_DIC=doc_comp$DIC[doc_comp$Vial=="New"]-doc_comp$DIC[doc_comp$Vial=="Acid wash"]
doc_comp$diff_DOC=doc_comp$DOC[doc_comp$Vial=="New"]-doc_comp$DOC[doc_comp$Vial=="Acid wash"]
doc_comp$diff_TOC=doc_comp$TOC[doc_comp$Vial=="New"]-doc_comp$TOC[doc_comp$Vial=="Acid wash"]
doc_comp$diff_TIC=doc_comp$TIC[doc_comp$Vial=="New"]-doc_comp$TIC[doc_comp$Vial=="Acid wash"]
plot(diff_DOC)
plot(doc_comp$diff_DOC)
points(doc_comp$diff_DIC,col="blue")
plot(doc_comp$diff_DOC,pch=19)
points(doc_comp$diff_DIC,col="blue",pch=19)
points(doc_comp$diff_DIC,col="magenta",pch=19)
abline(h=0)
summary(doc_lm)
View(doc_comp)
